<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A-Frame Game with VR Controllers</title>
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
</head>
<body>
  <a-scene vr-mode-ui="enabled: true">
    <!-- Небо и пол -->
    <a-sky color="#87CEEB"></a-sky>
    <a-plane position="0 0 0" rotation="-90 0 0" width="30" height="30" color="#228B22"></a-plane>

    <!-- Загрузка моделей -->
    <a-assets>
      <a-asset-item id="tree-obj" src="path/to/tree-model.gltf"></a-asset-item>
      <a-asset-item id="rock-obj" src="path/to/rock-model.gltf"></a-asset-item>
      <a-asset-item id="house-obj" src="path/to/house-model.gltf"></a-asset-item>
      <a-asset-item id="car-obj" src="path/to/car-model.gltf"></a-asset-item>
    </a-assets>

    <!-- Камера с прицелом -->
    <a-entity id="player" position="0 1.6 5">
      <a-entity camera look-controls>
        <!-- Точка прицела -->
        <a-entity position="0 0 -1" geometry="primitive: circle; radius: 0.01" material="color: #FF0000;"></a-entity>
        <!-- Курсор -->
        <a-entity cursor="fuse: true; fuseTimeout: 500" raycaster="objects: .collectible"></a-entity>
      </a-entity>
    </a-entity>

    <!-- VR-контроллеры -->
    <a-entity hand-controls="hand: left; handModelStyle: lowPoly; color: #FF0000"
              raycaster="objects: .collectible" line="color: #00FF00; opacity: 0.5"></a-entity>
    <a-entity hand-controls="hand: right; handModelStyle: lowPoly; color: #0000FF"
              raycaster="objects: .collectible" line="color: #00FF00; opacity: 0.5"></a-entity>

    <!-- 3D объекты для сбора -->
    <a-entity id="item1" position="0 1 -3" scale="0.5 0.5 0.5" gltf-model="url(sorceress.glb)" class="collectible"></a-entity>
    <a-entity id="item2" position="2 1 -5" scale="0.5 0.5 0.5" gltf-model="url(sorceress.glb)" class="collectible"></a-entity>
    <a-entity id="item3" position="-2 1 -4" scale="0.5 0.5 0.5" gltf-model="url(sorceress.glb)" class="collectible"></a-entity>

    <!-- Дополнительные модели -->
    <a-entity gltf-model="#tree-obj" position="0 1.6 -3" scale="1 1 1"></a-entity>
    <a-entity gltf-model="#rock-obj" position="2 0.5 -4" scale="0.5 0.5 0.5"></a-entity>
    <a-entity gltf-model="#house-obj" position="-3 0 -6" scale="2 2 2"></a-entity>
    <a-entity gltf-model="#car-obj" position="3 0 -5" scale="1 1 1"></a-entity>

    <!-- Счет и таймер -->
    <a-text id="score" value="Score: 0" position="-1 3 -5" color="#000"></a-text>
    <a-text id="timer" value="Time: 60" position="1 3 -5" color="#000"></a-text>
  </a-scene>

  <script>
    // Начальные значения
    let score = 0;
    let time = 60;

    // Сбор объекта при наведении и срабатывании курсора
    AFRAME.registerComponent('collectible', {
      init: function () {
        this.el.addEventListener('click', () => {
          if (!this.el.collected) {
            this.el.setAttribute('visible', false);
            this.el.collected = true;
            score++;
            document.getElementById('score').setAttribute('value', `Score: ${score}`);
          }
        });
      }
    });

    // Таймер
    let timer = setInterval(() => {
      if (time > 0) {
        time--;
        document.getElementById('timer').setAttribute('value', `Time: ${time}`);
      } else {
        clearInterval(timer);
        alert('Time is up!');
      }
    }, 1000);
  </script>
</body>
</html>
